<!DOCTYPE html>
<html lang="zxx">
   <head>
      <meta charset="utf-8">
      <!-- Responsive meta -->
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <!-- IE Compatibility meta -->
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- Description meta -->
      <meta name="description" content="Kotlin Tool-Kit">
      <!-- Author meta -->
      <meta name="author" content="CodeHelix">

      <!-- Page Title -->
      <title>Slate Kit</title>

      <!-- Favicon -->
      <link rel="shortcut icon" href="themes/perfo/assets/img/favicon.ico">
      <!-- Font Awesome Stylesheet -->
      <link rel="stylesheet" href="themes/perfo/assets/css/font-awesome.css">
      <!-- Bootstrap Stylesheet -->
      <link rel="stylesheet" href="themes/perfo/assets/css/bootstrap.css">
      <!-- Mockup Stylesheet -->
      <link rel="stylesheet" href="themes/perfo/assets/css/device-mockups.min.css">
      <!-- Owl Carousel Stylesheet -->
      <link rel="stylesheet" href="themes/perfo/assets/css/owl.carousel.min.css">
      <!-- Animate.CSS Stylesheet -->
      <link rel="stylesheet" href="themes/perfo/assets/css/animate.css">
      <!-- Animate.CSS Stylesheet -->
      <link rel="stylesheet" href="themes/perfo/assets/css/preloader.css">
      <!-- Custom Stylesheet -->
      <link rel="stylesheet" href="themes/perfo/assets/css/style.default.css">

      <link rel="stylesheet" type="text/css" href="themes/_common/css/lang.css" media="screen">

      <link rel="stylesheet" href="themes/perfo/app/app.css">
   </head>
   <body>


      <div class="page-header">
          <!--=============== Navbar ===============-->
          <nav class="navbar fixed-top navbar-toggleable-md">
              <div class="container">

                  <div class="navbar-header">
                      <!-- Navbar Brand -->
                      <a href="index.html" class="navbar-brand">
                          <strong class="brand-text">Slate Kit</strong>
                      </a>

                    <!-- Toggle Button -->
                      <button type="button" class="navbar-toggler navbar-toggler-right" data-toggle="collapse" data-target="#navbarcollapse" aria-controls="navbarcollapse" aria-expanded="false" aria-label="Toggle navigation">
                          MENU
                      </button>
                  </div>

                  <div class="collapse navbar-collapse" id="navbarcollapse">
                      <!-- Navbar Menu -->
                      <ul id="navigation" class="navbar-nav ml-auto">
                          
                      </ul>
                  </div>

              </div>
          </nav><!--=============== /. Navbar ===============-->


          <!--=============== Separator Section ===============-->
          <section id="sparator" class="separator no-padding-bottom padding-top-small has-background-text has-gradient" data-text="Slate Kit">
              <div class="container">

                  <div class="row">
                      <!-- Mockup Image  -->
                      <div class="image col-md-6 hidden-sm-down">
                          <!--<img src="themes/perfo/assets/img/iphone.png" alt="...." class="img-fluid">-->
                      </div>
                     
                      <!-- Heading Area -->
                      <div class="text text-right col-md-6 col-sm-12">
                          <h2 class="h1 has-text-shadow">ORM <br/> </h2>
                      </div>
                  </div>

              </div>
          </section>
          <!--=============== /. Separator Section ===============-->


          <!--=============== About Section ===============-->
          <section id="about" class="about no-padding-bottom">
              <div class="container">

                  <header>
                      <h2 class="with-bg-text has-line" data-text="ORM">ORM</h2>
                  </header>
					<p>The Slate Kit Entities is an ORM to manage your domain entities to/from a database.
						The ORM is designed using a <strong>DDD</strong> (Domain Driven Design) approach 
						with <strong>Entities, Services and Repositories</strong>, and an emphasis
						towards immutable data classes and FP ( functional programming ).
				<div class="row">					
					<div class="">
						<div id="project-slate-common" class="thumbnail">
							<div class="text-center"><img src="themes/start/images/white/layers.png" alt="..." width="80"></div>
							
							<div class="caption">
								<div class="text-center">
									<h3 >Slate Kit Entities </h3>
									<p>Easily map, manage, your data/domain models using an Domain-Driven ORM.</p>
									<br/>
								</div>
								<table class="table table-bordered table-striped">
									<tr>
										<td ><strong>package</strong></td>
										<td>slatekit.entities</td>
									</tr>
									<tr>
										<td><strong>jar</strong></td>
										<td>slatekit-entities.jar</td>
									</tr>
									<tr>
										<td><strong>source</strong></td>
										<td><a class="url-ch" href="https://github.com/code-helix/slatekit/tree/master/src/lib/kotlin/slatekit-entities/src/main/kotlin/slatekit/entities">slatekit.entities</a></td>
									</tr>
									<tr>
										<td><strong>sample</strong></td>
										<td><a class="url-ch" href="https://github.com/code-helix/slatekit/tree/master/src/apps/kotlin/slatekit-sampleapps/sampleapp-core">SampleApp-Core</a> : Full sample application </td>
									</tr>
									<tr>
										<td><strong>example</strong></td>
										<td><a class="url-ch" href="https://github.com/code-helix/slatekit/tree/master/src/apps/kotlin/slatekit-examples/src/main/kotlin/slatekit/examples/Example_Orm_Service.kt">Example_App.kt</a> : Small reference example on setup/usage</td>
									</tr>
									<tr>
										<td><strong>license</strong></td>
										<td>free : open-source</td>
									</tr>
									<tr>
										<td><strong>dependencies</strong></td>
										<td>								
											<ul>
												<li>slatekit-common.jar</li>
											</ul>
										</td>
									</tr>
									<tr>
										<td><strong>notes</strong></td>
										<td>														
											<ul>
												<li>The base app is contained in the slatekit.core project</li>
												<li>The base app can be easily sub-classed and much of the functionality can be customized</li>
												<li>Slate Kit Core has several other architechtural components</li>
											</ul>
										 </td>
									</tr>
									<tr>
										<td><img src="themes/start/images/white/manual.png" width="50" alt=""></td>
										<td>Check sample app ( containing a full sample code ), 
										the example ( smaller reference on usage ), and source code for more info.
										</td>
									</tr>
								</table>
							</div>
							<!--
							<div class="alert alert-warning text-left" role="alert">
								<p><i class="fa fa-link"></i> This feature uses the <strong><a href="kotlin-mod-env.html" class="url-ch">Env</a></strong> component in utils to setup logical application environments such as local, dev, qa, uat, live.
								</p>
							</div>
							-->
						</div>
					</div>
				</div>
				<br/>
				<h1 id="apis">Goals</h1>
				<table class="table table-bordered table-striped">
					<tr>
						<td><strong>Goal</strong></td>
						<td><strong>Description</strong></td>
					</tr>
					<tr>
						<td><strong>Light-Weight</strong></td>
						<td>Simple, light-weight ORM for single model/table persistence. No support for relationships.</td>
					</tr>
					<tr>
						<td><strong>Domain Driven</strong></td>
						<td>Approach to building models and managing persistence using a Domain Driven Approach</td>
					</tr>
					<tr>
						<td><strong>SQL Transparent</strong></td>
						<td>Support for direclty using SQL / Stored procs where needed. We don't hide or abstract SQL.</td>
					</tr>
				</table>				
				<br/>
				
				<h1 id="apis">Concepts</h1>
				<table class="table table-bordered table-striped">
					<tr>
						<td><strong>Concept</strong></td>
						<td><strong>Description</strong></td>
						<td><strong>Example</strong></td>
					</tr>
					<tr>
						<td><strong>Entities</strong></td>
						<td>The top-most object in the system. Used to register entities, and get various services</td>
						<td>Entities()</td>
					</tr>
					<tr>
						<td><strong>Entity</strong></td>
						<td>Represents your data model with identity fields for persistence</td>
						<td>Movie</td>
					</tr>
					<tr>
						<td><strong>Generic Entity</strong></td>
						<td>An entity with common fields like Id, TimeStamps, Audit Fields, Uniqueness and others</td>
						<td>EntityWithId</td>
					<tr>
						<td><strong>Generic Service</strong></td>
						<td>A generic entity service to support CRUD operations, business logic; delegates calls to the Repository</td>						
						<td>EntityService&lt;T&gt;</td>
					</tr>
					<tr>
						<td><strong>Generic Repository</strong></td>
						<td>A generic entity repository to support CRUD operations, find methods, and other features.</td>
						<td>EntityRepo&lt;T&gt;</td>
					</tr>
					<tr>
						<td><strong>Generic Mapper</strong></td>
						<td>A general purpose mapper to map an entity to SQL, and from records back to entities.</td>
						<td>EntityMapper</td>
					</tr>
					<tr>
						<td><strong>Generic Query</strong></td>
						<td>A query builder specifying sql queries. Direct SQL use is still supported</td>
						<td>Query()</td>
					</tr>
					<tr>
						<td><strong>Model</strong></td>
						<td>A general purpose schema to store metadata about an Entity ( used by the Mapper )</td>
						<td>Model(Movie::class)</td>
					</tr>
				</table>
				<br/>
				
				<h1>Features</h1>
				<table class="table table-bordered table-striped">
					<tr>
						<td><strong>Feature</strong></td>
						<td><strong>Description</strong></td>
					</tr>
					<tr> 
						<td><strong>1. Databases</strong></td>
						<td>Setup your entities to use 1 or more databases.
						</td>
					</tr>
					<tr> 
						<td><strong>2. In-Memory</strong></td>
						<td>An in-memory implementation of a Generic Repository for rapid prototyping</td>
					</tr>
					<tr> 
						<td><strong>3. Registration</strong></td>
						<td>Multiple ways to register your entities, services, repositories, mappers</td>
					</tr>
					<tr> 
						<td><strong>4. Defaults</strong></td>
						<td>Default services, repositories available to get CRUD and Find functionality without subclassing</td>
					</tr>
					<tr> 
						<td><strong>5. CRUD</strong></td>
						<td>Built in support in EntityService and EntityRepo for <strong>C</strong>reate, <strong>R</strong>etrieve, <strong>U</strong>pdate, <strong>D</strong>elete and <strong>F</strong>ind methods</td>
					</tr>
					<tr> 
						<td><strong>6. Find By</strong></td>
						<td>Built in support in EntityService and EntityRepo for multiple find and search methods</td>
					</tr>
					<tr> 
						<td><strong>7. Life-cycle</strong></td>
						<td>Support for entity life-cycle events and hooks such as onSave, onDelete, onMapped</td>
					</tr>
					<tr> 
						<td><strong>8. Annotations</strong></td>
						<td>Easily mark class fields for persistence using annotations using <strong>@field</strong> annotations.</td>
					</tr>
				</table>
				<br/>
				<h1 id="orm-overview">Details</h1>
				<p>These are all the various steps/concepts in the ORM setup and usage. All the various parts of the ORM were designed to be used independently ( where applicable ) while also being able to be integrated together to support typical ORM features. </p>
				<table class="table table-bordered table-striped">
					<tr>
						<td><strong>Step</strong></td>
						<td><strong>About</strong></td>
						<td><strong>Required?</strong></td>
						<td><strong>Docs</strong></td>
					</tr>
					<tr> 
						<td><strong>1. Databases</strong></td>
						<td>How to register 1 or more databases</td>
						<td><strong>required</strong></td>
						<td><a href="#orm-database" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					<tr >
						<td><strong>2. Entities</strong></td>
						<td>How to declare your model and map fields to table columns</td>
						<td><strong>required</strong></td>
						<td><a href="#orm-entity" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					<tr> 
						<td><strong>3. Setup</strong></td>
						<td>How to register your entity with a database, service.</td>
						<td><strong>required</strong></td>
						<td><a href="#orm-setup" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					<tr> 
						<td><strong>4. Service</strong></td>
						<td>How to setup a service for to centralize business logic and boiler-plate operations on an entity</td>
						<td><strong>suggested</strong></td>
						<td><a href="#orm-service" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					<tr> 
						<td><strong>5. Repository</strong></td>
						<td>How to setup a repository for CRUD operations on your entity.</td>
						<td>optional</td>
						<td><a href="#orm-repository" class="more"><span class="btn btn-primary">more</span></a></td>						
					</tr>
					<tr > 
						<td><strong>6. Mappers</strong></td>
						<td>How to create or use a mapper for mapping entities to and from sql</td>
						<td>optional</td>
						<td><a href="#orm-mapper" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					<tr > 
						<td><strong>7. Models</strong></td>
						<td>How the underlying model definitions and mappings are stored.</td>
						<td>n/a</td>
						<td><a href="#orm-model" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					<tr> 
						<td><strong>8. Relations</strong></td>
						<td>Working with table relationships</td>
						<td>n/a</td>
						<td><a href="#orm-relations" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					
				</table>
				
				<div>
					<br/><br/>
					<div> 
						<h2 id="orm-database">1. Databases</h2>
						<p>You can register database connections using a <strong>database lookup</strong> called
						a <strong>DbLookup</strong> which can hold a <strong>default database</strong>, and/or many 
						<strong>named databases</strong>.
						Then you connect a specific model/entities to a named database. 
						This approach allows for flexibility in supporting multiple databases. However, in terms of types of database, currently, only <strong>MySql</strong> is supported.
						</p>
						<br/>
						<div class="alert alert-warning text-left" role="alert">
							<p><i class="fa fa-link"></i> This feature uses the <strong><a href="kotlin-mod-dblookup.html" class="url-ch">DbLookup</a></strong> component in utils to register and lookup databases.
							</p>
						</div>
						<h3>Example</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">slatekit.common.db.DbConString</span>
<span class="k">import</span> <span class="nn">slatekit.common.db.DbLookup</span>
<span class="k">import</span> <span class="nn">slatekit.common.db.DbLookup.DbLookupCompanion.defaultDb</span>
<span class="k">import</span> <span class="nn">slatekit.common.db.DbLookup.DbLookupCompanion.namedDbs</span>
<span class="k">import</span> <span class="nn">slatekit.common.db.DbTypeMySql</span>


<span class="c1">// 1. Create DbLookup using a connection from a file
// NOTE: This is safer and more secure as it loads
// the connection string from the user directory in folder ./slate
</span><span class="kd">val</span> <span class="py">dbLookup1</span> <span class="p">=</span> <span class="n">defaultDb</span><span class="p">(</span><span class="n">ConfFuncs</span><span class="p">.</span><span class="n">readDbCon</span><span class="p">(</span><span class="s">"user://.slate/db_default.txt"</span><span class="p">)</span><span class="o">!!</span><span class="p">)</span>

<span class="c1">// 2. Create a DbLookup using an explicit connection string
// NOTE: Avoid using explicit connection strings in code.
</span><span class="kd">val</span> <span class="py">dbLookup2</span> <span class="p">=</span> <span class="n">defaultDb</span><span class="p">(</span>
	<span class="n">DbConString</span><span class="p">(</span>
		<span class="s">"com.mysql.jdbc.Driver"</span><span class="p">,</span>
		<span class="s">"jdbc:mysql://localhost/default"</span><span class="p">,</span>
		<span class="s">"root"</span><span class="p">,</span>
		<span class="s">"abcdefghi"</span>
	<span class="p">)</span>
<span class="p">)</span>

<span class="c1">// 3. Create a DbLookup using multiple named databases.
</span><span class="kd">val</span> <span class="py">dbLookup3</span> <span class="p">=</span> <span class="n">namedDbs</span><span class="p">(</span><span class="n">listOf</span><span class="p">(</span>
	<span class="n">Pair</span><span class="p">(</span>
		<span class="s">"movies"</span><span class="p">,</span> <span class="n">DbConString</span><span class="p">(</span>
			<span class="s">"com.mysql.jdbc.Driver"</span><span class="p">,</span>
			<span class="s">"jdbc:mysql://localhost/movies"</span><span class="p">,</span>
			<span class="s">"root"</span><span class="p">,</span>
			<span class="s">"abcdefghi"</span>
		<span class="p">)</span>
	<span class="p">),</span>
	<span class="n">Pair</span><span class="p">(</span>
		<span class="s">"files"</span><span class="p">,</span> <span class="n">DbConString</span><span class="p">(</span>
			<span class="s">"com.mysql.jdbc.Driver"</span><span class="p">,</span>
			<span class="s">"jdbc:mysql://localhost/files"</span><span class="p">,</span>
			<span class="s">"root"</span><span class="p">,</span>
			<span class="s">"abcdefghi"</span>
		<span class="p">)</span>
	<span class="p">)</span>
<span class="p">))</span> 
</code></pre>
</div>		
						<br/>
						<div class="alert alert-info" role="alert">
							<p><i class="fa fa-info-circle"></i></p>
							<ol>								
							  <li>Slate Kit currently supports <strong>MySql</strong></li>
							  <li>Support for <strong>multiple databases</strong> is available</li>
							  <li>See the <strong><a href="kotlin-mod-config.html" class="url-ch">Config</a></strong> component in the utilities page for getting database info out of config files</li>
							  <li>Ensure your database driver is referenced by the project. e.g. <strong>"mysql-connector-java-5.1.38-bin.jar"</strong></li>
							</ol>
						</div>	
						<br/>
						<div class="alert alert-danger text-left" role="alert">
							<p><i class="fa fa-lock"></i></p>
							<ol>								
							  <li>Secure your connection strings via encryption</li>
							  <li>Do not place connection strings in source code</li>
							  <li>You can create dedicated config files for connection strings </li>
							  <li>You can store config files in the <strong>user</strong> directory and refer to them from your config</li>
							  <li>See the <strong><a href="kotlin-mod-config.html" class="url-ch">Config</a></strong> component in the utilities for working with connection strings</li>
							</ol>
						</div>
						<br/>
						<h3>More</h3>
						<p>For more information, see the full example that is part of the examples project</p>
						<a href="kotlin-mod-data.html" class="more"><span class="btn btn-template">See full code</span></a>
						<a href="#orm-overview" class="more"><span class="btn btn-template">Back to top</span></a>
					</div>
					<br/><br/><br/>
					<div> 
						<h2 id="orm-entity">2. Entities</h2>
						<p>Each class that you want persisted and mapped to a database table/record must extend one of the Entity traits.
						The traits ( refer to link below ) provides some consistent fields and behaviour to facilitate persistance and mapping.
						There are various traits you can use to represent your entity.
						This is to support various design approaches and fields within the entity.
						The entities are typically <strong>case classes</strong> to support <strong>immutability</strong>
						</p>	
						<p>By default, the column mappings are represented using <strong>annotations</strong>.
						While this may be considered more like java, we believe this is still highly practical, involves less work,
						and is also more <strong>type-safe</strong>.
						However, you can also manually setup the mappings using the <strong>Model</strong> class (shown later).
						</p>
						<br/>
						<div class="alert alert-warning text-left" role="alert">
							<p><i class="fa fa-link"></i> Refer to 
								<strong><a href="https://github.com/code-helix/slatekit/blob/master/src/lib/kotlin/slatekit-entities/src/main/kotlin/slatekit/entities/core/IEntity.kt" class="url-ch">Entity.kt</a></strong> for more info on the traits and fields.
							</p>
						</div>
						<h3>Example</h3>
						<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">slatekit.common.DateTime</span>
<span class="k">import</span> <span class="nn">slatekit.common.Field</span>
<span class="k">import</span> <span class="nn">slatekit.entities.core.EntityWithId</span>
 
<span class="c1">// NOTES: You can entities properties to be persisted
// in 3 different ways:
// 1. annotations on the Entity
// 2. building a Model and manually registering property references
// 3. building a Model and manually registering via field/names
//
// See Example_Mapper.kt and slatekit.common.Model for more info.
//
// IMMUTABILITY:
// The ORM is originally built for immutable Entities ( Data Classes )
// It also supports Entities with "vars", but has not been tested.
// In a future release, we will fully support var properties
</span><span class="kd">data class</span> <span class="nc">Movie</span><span class="p">(</span>
        <span class="k">override</span> <span class="kd">val</span> <span class="py">id</span> <span class="p">:</span><span class="n">Long</span> <span class="p">=</span> <span class="m">0L</span><span class="p">,</span>


        <span class="n">@property</span><span class="p">:</span><span class="n">Field</span><span class="p">(</span><span class="n">required</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">length</span> <span class="p">=</span> <span class="m">50</span><span class="p">)</span>
        <span class="kd">val</span> <span class="py">title</span> <span class="p">:</span><span class="n">String</span> <span class="p">=</span> <span class="s">""</span><span class="p">,</span>


        <span class="n">@property</span><span class="p">:</span><span class="n">Field</span><span class="p">(</span><span class="n">length</span> <span class="p">=</span> <span class="m">20</span><span class="p">)</span>
        <span class="kd">val</span> <span class="py">category</span> <span class="p">:</span><span class="n">String</span> <span class="p">=</span> <span class="s">""</span><span class="p">,</span>


        <span class="n">@property</span><span class="p">:</span><span class="n">Field</span><span class="p">(</span><span class="n">required</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span>
        <span class="kd">val</span> <span class="py">playing</span> <span class="p">:</span><span class="n">Boolean</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span>


        <span class="n">@property</span><span class="p">:</span><span class="n">Field</span><span class="p">(</span><span class="n">required</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span>
        <span class="kd">val</span> <span class="py">cost</span><span class="p">:</span><span class="n">Int</span><span class="p">,</span>


        <span class="n">@property</span><span class="p">:</span><span class="n">Field</span><span class="p">(</span><span class="n">required</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span>
        <span class="kd">val</span> <span class="py">rating</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span>


        <span class="n">@property</span><span class="p">:</span><span class="n">Field</span><span class="p">(</span><span class="n">required</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span>
        <span class="kd">val</span> <span class="py">released</span><span class="p">:</span> <span class="n">DateTime</span><span class="p">,</span>


        <span class="c1">// These are the timestamp and audit fields.
</span>        <span class="n">@property</span><span class="p">:</span><span class="n">Field</span><span class="p">(</span><span class="n">required</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span>
        <span class="kd">val</span> <span class="py">createdAt</span> <span class="p">:</span> <span class="n">DateTime</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">now</span><span class="p">(),</span>


        <span class="n">@property</span><span class="p">:</span><span class="n">Field</span><span class="p">(</span><span class="n">required</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span>
        <span class="kd">val</span> <span class="py">createdBy</span> <span class="p">:</span><span class="n">Long</span>  <span class="p">=</span> <span class="m">0</span><span class="p">,</span>


        <span class="n">@property</span><span class="p">:</span><span class="n">Field</span><span class="p">(</span><span class="n">required</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span>
        <span class="kd">val</span> <span class="py">updatedAt</span> <span class="p">:</span> <span class="n">DateTime</span> <span class="p">=</span>  <span class="n">DateTime</span><span class="p">.</span><span class="n">now</span><span class="p">(),</span>


        <span class="n">@property</span><span class="p">:</span><span class="n">Field</span><span class="p">(</span><span class="n">required</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span>
        <span class="kd">val</span> <span class="py">updatedBy</span> <span class="p">:</span><span class="n">Long</span>  <span class="p">=</span> <span class="m">0</span>
<span class="p">)</span>
    <span class="p">:</span> <span class="n">EntityWithId</span>
<span class="p">{</span>
    <span class="k">companion</span> <span class="kd">object</span> <span class="err">{
        </span><span class="nc">fun</span> <span class="n">samples</span><span class="p">():</span><span class="n">List</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span>
                <span class="n">Movie</span><span class="p">(</span>
                        <span class="n">title</span> <span class="p">=</span> <span class="s">"Indiana Jones: Raiders of the Lost Ark"</span><span class="p">,</span>
                        <span class="n">category</span> <span class="p">=</span> <span class="s">"Adventure"</span><span class="p">,</span>
                        <span class="n">playing</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span>
                        <span class="n">cost</span> <span class="p">=</span> <span class="m">10</span><span class="p">,</span>
                        <span class="n">rating</span> <span class="p">=</span> <span class="m">4.5</span><span class="p">,</span>
                        <span class="n">released</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="m">1985</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">10</span><span class="p">)</span>
                <span class="p">),</span>
                <span class="n">Movie</span><span class="p">(</span>
                        <span class="n">title</span> <span class="p">=</span> <span class="s">"WonderWoman"</span><span class="p">,</span>
                        <span class="n">category</span> <span class="p">=</span> <span class="s">"action"</span><span class="p">,</span>
                        <span class="n">playing</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
                        <span class="n">cost</span> <span class="p">=</span> <span class="m">100</span><span class="p">,</span>
                        <span class="n">rating</span> <span class="p">=</span> <span class="m">4.2</span><span class="p">,</span>
                        <span class="n">released</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="m">2017</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>
						<br/>
						<h3>Fields</h3>
						<p>These are some of the fields available in the various traits</p>
						<table class="table table-bordered table-striped">
							<tr>
								<td class="col-sm-2"><strong>Field</strong></td>
								<td class="col-sm-1"><strong>Type</strong></td>
								<td class="col-sm-1"><strong>Managed</strong></td>
								<td class="col-sm-1"><strong>Required</strong></td>
								<td class="col-sm-2"><strong>Trait</strong></td>
								<td><strong>Notes</strong></td>
							</tr>
							<tr>
								<td ><strong>id</strong></td>
								<td>long</td>
								<td>yes</td>
								<td>yes</td>
								<td>Entity</td>
								<td>primary key of the table</td>
							</tr>
							<tr>
								<td ><strong>createdAt</strong></td>
								<td>DateTime</td>
								<td>yes</td>
								<td>yes</td>
								<td>EntityWithTime</td>
								<td>Create date timestamp</td>
							</tr>
							<tr>
								<td ><strong>createdBy</strong></td>
								<td>long</td>
								<td>config</td>
								<td>yes</td>
								<td>EntityWithUser</td>
								<td>User id who created item</td>
							</tr>
							<tr>
								<td ><strong>updatedAt</strong></td>
								<td>DateTime</td>
								<td>yes</td>
								<td>yes</td>
								<td>EntityWithTime</td>
								<td >Update date timestamp</td>
							</tr>
							<tr>
								<td><strong>updatedBy</strong></td>
								<td>long</td>
								<td>config</td>
								<td>yes</td>
								<td>EntityWithUser</td>
								<td>User id who updated item</td>
							</tr>
							<tr>
								<td><strong>uniqueId</strong></td>
								<td>string</td>
								<td>yes</td>
								<td>no</td>
								<td>EntityWithGuid</td>
								<td>a unique guid generated 1 time used for cross-environment uniquess and import/export.</td>
							</tr>
						</table>	
						<br/>
						<div class="alert alert-info" role="alert">
							<p><i class="fa fa-info-circle"></i></p>
							<ol>
							  <li>Each entity <strong>MUST</strong> at least extend from <strong>Entity</strong></li>
							  <li>The primary key is a field <strong>id</strong> with type <strong>Long</strong></li>
							  <li>The intent of the EntityUnique is to support a guid for the uniqueId field.</li>
							</ol>
						</div>					
						<h3>More</h3>
						<p>For more information, see the full example that is part of the examples project</p>
						<a href="kotlin-mod-orm-service.html" class="more"><span class="btn btn-template">See full code</span></a>
						<a href="#orm-overview" class="more"><span class="btn btn-template">Back to top</span></a>
						<br/>
					</div>
					<br/><br/><br/>				
					<div>
						<h2 id="orm-setup">3. Setup</h2>
						<p>Once you create your entities ( and <strong>optional</strong> services, repositories ), you simply 
						register your entities using the <strong>Entities</strong> class to connect your entity to a database, service, repo, and mapper. For convenience to support average use-cases,
						there are methods in the Entities class to handle a default setup.
						Each entity can have a corresponding:
						</p>
						<ol>
							<li>Connection: e.g. tied to a default database or a named database</li>
							<li>Service: e.g. UserService extends EntityService[User]...</li>
							<li>Repository e.g. UserRepo extends EntityRepoMySql[User]...</li>
							<li>Mapper e.g. EntityMapper(typeof[User])...</li>
						</ol>
						<h3>Example</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">slatekit.common.db.DbConString</span>
<span class="k">import</span> <span class="nn">slatekit.common.db.DbLookup.DbLookupCompanion.defaultDb</span>
<span class="k">import</span> <span class="nn">slatekit.entities.core.Entities</span>

 <span class="kd">val</span> <span class="py">dbLookup</span> <span class="p">=</span> <span class="n">defaultDb</span><span class="p">(</span>
            <span class="n">DbConString</span><span class="p">(</span>
                <span class="s">"com.mysql.jdbc.Driver"</span><span class="p">,</span>
                <span class="s">"jdbc:mysql://localhost/default"</span><span class="p">,</span>
                <span class="s">"root"</span><span class="p">,</span>
                <span class="s">"abcdefghi"</span>
            <span class="p">)</span>
        <span class="p">)</span>
		
<span class="c1">// The entities can be registered and set up in multiple ways.
// They can be registered to :
//
// - use in-memory repository or a sql ( mysql ) repository
// - use the default EntityService[T] or a custom EntityService
// - use a singleton instance or new instance
// - use a certain type of database ( mysql only for now )
// - use the default EntityRepository ( mysql ) or a custom repository
// - use a supplied EntityMapper or a custom mapper
</span><span class="kd">val</span> <span class="py">entities</span> <span class="p">=</span> <span class="n">Entities</span><span class="p">(</span><span class="n">dbLookup</span><span class="p">)</span>

<span class="c1">// Case 1: In-memory
</span><span class="n">showResults</span><span class="p">(</span><span class="s">"Case 1"</span><span class="p">,</span> <span class="n">entities</span><span class="p">.</span><span class="n">register</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">isSqlRepo</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span> <span class="n">entityType</span> <span class="p">=</span> <span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">))</span>

<span class="c1">// Case 2: In-memory + with custom service
</span><span class="n">showResults</span><span class="p">(</span><span class="s">"Case 2"</span><span class="p">,</span> <span class="n">entities</span><span class="p">.</span><span class="n">register</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">isSqlRepo</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span> <span class="n">entityType</span> <span class="p">=</span> <span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">,</span>
		<span class="n">serviceType</span> <span class="p">=</span> <span class="n">MovieService</span><span class="o">::</span><span class="k">class</span><span class="p">))</span>

<span class="c1">// Case 3: Sql-repo = EntityRepository[T] - mysql, default service ( EntityService[T] )
// Note: this uses the default database connection above
</span><span class="n">showResults</span><span class="p">(</span><span class="s">"Case 3"</span><span class="p">,</span> <span class="n">entities</span><span class="p">.</span><span class="n">register</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">isSqlRepo</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">entityType</span> <span class="p">=</span> <span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">,</span>
		<span class="n">dbType</span> <span class="p">=</span> <span class="n">DbTypeMySql</span><span class="p">))</span>

<span class="c1">// Case 4: Sql-repo + with custom service = default sql repo ( EntityRepository[T] - mysql )
// Note: this uses the default database connection above
</span><span class="n">showResults</span><span class="p">(</span><span class="s">"Case 4"</span><span class="p">,</span> <span class="n">entities</span><span class="p">.</span><span class="n">register</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">isSqlRepo</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">entityType</span> <span class="p">=</span> <span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">,</span>
		<span class="n">serviceType</span> <span class="p">=</span> <span class="n">MovieService</span><span class="o">::</span><span class="k">class</span><span class="p">,</span> <span class="n">dbType</span> <span class="p">=</span> <span class="n">DbTypeMySql</span><span class="p">))</span>

<span class="c1">// Case 5: Custom repository
// Note: this uses the default database connection above
</span><span class="n">showResults</span><span class="p">(</span><span class="s">"Case 5"</span><span class="p">,</span> <span class="n">entities</span><span class="p">.</span><span class="n">register</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">isSqlRepo</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">entityType</span> <span class="p">=</span> <span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">,</span>
		<span class="n">repository</span> <span class="p">=</span> <span class="n">MovieRepository</span><span class="p">(),</span> <span class="n">dbType</span> <span class="p">=</span> <span class="n">DbTypeMySql</span><span class="p">))</span>

<span class="c1">// Case 6: Custom service type, custom repository, database type
</span><span class="n">showResults</span><span class="p">(</span><span class="s">"Case 6"</span><span class="p">,</span> <span class="n">entities</span><span class="p">.</span><span class="n">register</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">isSqlRepo</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">entityType</span> <span class="p">=</span> <span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">,</span>
		<span class="n">serviceType</span> <span class="p">=</span> <span class="n">MovieService</span><span class="o">::</span><span class="k">class</span><span class="p">,</span> <span class="n">repository</span> <span class="p">=</span> <span class="n">MovieRepository</span> <span class="p">(),</span> <span class="n">dbType</span> <span class="p">=</span> <span class="n">DbTypeMySql</span><span class="p">))</span>

<span class="c1">// Case 7: Custom service type, custom repository, database specified
// Note: this uses the named database connection above called "Movie_db"
</span><span class="n">showResults</span><span class="p">(</span><span class="s">"Case 7"</span><span class="p">,</span> <span class="n">entities</span><span class="p">.</span><span class="n">register</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">isSqlRepo</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">entityType</span> <span class="p">=</span> <span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">,</span>
		<span class="n">serviceType</span> <span class="p">=</span> <span class="n">MovieService</span><span class="o">::</span><span class="k">class</span><span class="p">,</span> <span class="n">repository</span> <span class="p">=</span> <span class="n">MovieRepository</span> <span class="p">(),</span>
		<span class="n">dbType</span> <span class="p">=</span> <span class="n">DbTypeMySql</span><span class="p">,</span> <span class="n">dbKey</span> <span class="p">=</span> <span class="s">"Movie_db"</span><span class="p">))</span>

<span class="c1">// Case 8: Custom service type, custom repository, database specified, mapper specified
// Each registration will simply overwrite an existing registration for the same entity type
</span><span class="n">showResults</span><span class="p">(</span><span class="s">"Case 8"</span><span class="p">,</span> <span class="n">entities</span><span class="p">.</span><span class="n">register</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">isSqlRepo</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">entityType</span> <span class="p">=</span> <span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">,</span>
		<span class="n">serviceType</span> <span class="p">=</span> <span class="n">MovieService</span><span class="o">::</span><span class="k">class</span><span class="p">,</span> <span class="n">repository</span> <span class="p">=</span> <span class="n">MovieRepository</span> <span class="p">(),</span>
		<span class="n">dbType</span> <span class="p">=</span> <span class="n">DbTypeMySql</span><span class="p">))</span>

<span class="c1">// Case 9: Provide a database db key ( e.g. for multiple database connections )
</span><span class="n">showResults</span><span class="p">(</span><span class="s">"Case 9"</span><span class="p">,</span> <span class="n">entities</span><span class="p">.</span><span class="n">register</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">isSqlRepo</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">entityType</span> <span class="p">=</span> <span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">,</span>
		<span class="n">serviceType</span> <span class="p">=</span> <span class="n">MovieService</span><span class="o">::</span><span class="k">class</span><span class="p">,</span> <span class="n">repository</span> <span class="p">=</span> <span class="n">MovieRepository</span> <span class="p">(),</span>
		<span class="n">dbType</span> <span class="p">=</span> <span class="n">DbTypeMySql</span><span class="p">,</span> <span class="n">dbKey</span> <span class="p">=</span> <span class="s">"Movie_db"</span><span class="p">))</span>

<span class="c1">// Case 9: Provide a database db key ( e.g. for multiple database connections )
</span><span class="n">showResults</span><span class="p">(</span><span class="s">"Case 10"</span><span class="p">,</span> <span class="n">entities</span><span class="p">.</span><span class="n">register</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">isSqlRepo</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">entityType</span> <span class="p">=</span> <span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">,</span>
		<span class="n">serviceType</span> <span class="p">=</span> <span class="n">MovieService</span><span class="o">::</span><span class="k">class</span><span class="p">,</span> <span class="n">repository</span> <span class="p">=</span> <span class="n">MovieRepository</span> <span class="p">(),</span>
		<span class="n">dbType</span> <span class="p">=</span> <span class="n">DbTypeMySql</span><span class="p">,</span> <span class="n">dbKey</span> <span class="p">=</span> <span class="s">"group1"</span><span class="p">,</span> <span class="n">dbShard</span> <span class="p">=</span> <span class="s">"shard1"</span><span class="p">))</span>

<span class="c1">// Use case 1: Get repository
</span><span class="kd">val</span> <span class="py">repo</span> <span class="p">=</span> <span class="n">entities</span><span class="p">.</span><span class="n">getRepo</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>

<span class="c1">// Use case 2: Get the service
</span><span class="kd">val</span> <span class="py">svc</span> <span class="p">=</span> <span class="n">entities</span><span class="p">.</span><span class="n">getSvc</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>

<span class="c1">// Use case 3: Get the entity mapper
</span><span class="kd">val</span> <span class="py">mapper</span> <span class="p">=</span> <span class="n">entities</span><span class="p">.</span><span class="n">getMapper</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>

<span class="c1">// Use case 4: Get the repo for a specific shard
</span><span class="kd">val</span> <span class="py">repoShar</span> <span class="p">=</span> <span class="n">entities</span><span class="p">.</span><span class="n">getRepo</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>
        
</code></pre>
</div>
						<br/>
						<div class="alert alert-info" role="alert">
							<p><i class="fa fa-info-circle"></i></p>
							<ol>
							  <li>The simplest setup is to only create an entity and use the pre-built service and repo classes.</li>
							  <li>You are free to create your own <strong>service</strong> or <strong>repository</strong> classes.</li>
							  <li>Ensure your database driver is referenced by the project. e.g. "mysql-connector-java-5.1.38-bin.jar"</li>							  
							</ol>
						</div>	
						<br/>			
						<h3>More</h3>
						<a href="kotlin-mod-orm-setup.html" class="more"><span class="btn btn-template">See full code</span></a>
						<a href="#orm-overview" class="more"><span class="btn btn-template">Back to top</span></a>
					</div>
					<br/><br/><br/>
					<div> 
						<h2 id="orm-service">4. Service</h2>
						<p>Each entity has a corresponding service that provides boiler-plate CRUD and search operations.
						You do <strong>NOT</strong> have to create one by default, you can simply use the built-in <strong>EntityService[T]</strong> class.
						The EntityService[T] class is essentially an implementation of a <strong>Generic Entity Service</strong> pattern. 
						You can ofcourse create a custom service class for your entity by extending from EntityService[T].
						</p>
						<br/>
						<h3>Declare</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">slatekit.core.common.AppContext</span>
<span class="k">import</span> <span class="nn">slatekit.core.common.EntityServiceWithSupport</span>
<span class="k">import</span> <span class="nn">slatekit.entities.core.EntityRepo</span>


<span class="kd">class</span> <span class="nc">MovieService</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">AppContext</span><span class="p">,</span> <span class="n">repo</span><span class="p">:</span> <span class="n">EntityRepo</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;)</span>
  <span class="p">:</span> <span class="n">EntityServiceWithSupport</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">context</span><span class="p">,</span> <span class="n">repo</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
</code></pre>
</div>
						<br/>
						<h3>Usage</h3>
						<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// The Service layer initialized with an repository .
// Purpose of the service layer is to:
//
// 1. Delegate to underlying repository for CRUD operations after applying any business logic.
// 2. Provide a layer to insert business logic during other operations.
// 3. Has some( not all ) methods that match the repository CRUD, Find, Delete methods
// 4. Subclassed to perform more complex business logic that may still involve using the repo.
//
</span><span class="kd">val</span> <span class="py">ctx</span> <span class="p">=</span> <span class="n">AppContext</span><span class="p">.</span><span class="n">simple</span><span class="p">(</span><span class="s">"sampleapp1"</span><span class="p">)</span>
<span class="kd">val</span> <span class="py">service</span> <span class="p">=</span> <span class="n">MovieService</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">EntityRepoInMemory</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">))</span>

<span class="c1">// CASE 1: Create 3-4 users for showing use-cases
</span><span class="n">service</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">Movie</span><span class="p">(</span><span class="m">0L</span><span class="p">,</span> <span class="s">"Batman Begins"</span>     <span class="p">,</span> <span class="s">"action"</span><span class="p">,</span> <span class="k">false</span><span class="p">,</span> <span class="m">50</span><span class="p">,</span> <span class="m">4.2</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="m">2005</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">)))</span>
<span class="n">service</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">Movie</span><span class="p">(</span><span class="m">0L</span><span class="p">,</span> <span class="s">"Dark Knight"</span>      <span class="p">,</span> <span class="s">"action"</span><span class="p">,</span> <span class="k">false</span><span class="p">,</span> <span class="m">100</span><span class="p">,</span><span class="m">4.5</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="m">2012</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">)))</span>
<span class="n">service</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">Movie</span><span class="p">(</span><span class="m">0L</span><span class="p">,</span> <span class="s">"Dark Knight Rises"</span><span class="p">,</span> <span class="s">"action"</span><span class="p">,</span> <span class="k">false</span><span class="p">,</span> <span class="m">120</span><span class="p">,</span><span class="m">4.2</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="m">2012</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">)))</span>

<span class="c1">// CASE 2: Get by id
</span><span class="n">printOne</span><span class="p">(</span><span class="s">"2"</span><span class="p">,</span> <span class="n">service</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="m">2</span><span class="p">))</span>

<span class="c1">// CASE 3: Update
</span><span class="kd">val</span> <span class="py">item2</span> <span class="p">=</span> <span class="n">service</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>
<span class="n">item2</span><span class="o">?.</span><span class="n">let</span> <span class="p">{</span> <span class="n">item</span> <span class="p">-&gt;</span>
	<span class="kd">val</span> <span class="py">updated</span> <span class="p">=</span> <span class="n">item</span><span class="p">.</span><span class="n">copy</span><span class="p">(</span><span class="n">title</span> <span class="p">=</span> <span class="s">"Batman: Dark Knight"</span><span class="p">)</span>
	<span class="n">service</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">updated</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// CASE 4: Get all
</span><span class="n">printAll</span><span class="p">(</span><span class="s">"all"</span><span class="p">,</span> <span class="n">service</span><span class="p">.</span><span class="n">getAll</span><span class="p">())</span>

<span class="c1">// CASE 5: Get recent/last 2
</span><span class="n">printAll</span><span class="p">(</span><span class="s">"recent"</span><span class="p">,</span> <span class="n">service</span><span class="p">.</span><span class="n">recent</span><span class="p">(</span><span class="m">2</span><span class="p">))</span>

<span class="c1">// CASE 6: Get oldest 2
</span><span class="n">printAll</span><span class="p">(</span><span class="s">"oldest"</span><span class="p">,</span> <span class="n">service</span><span class="p">.</span><span class="n">oldest</span><span class="p">(</span><span class="m">2</span><span class="p">))</span>

<span class="c1">// CASE 7: Get first one ( oldest )
</span><span class="n">printOne</span><span class="p">(</span><span class="s">"first"</span><span class="p">,</span> <span class="n">service</span><span class="p">.</span><span class="n">first</span><span class="p">())</span>

<span class="c1">// CASE 8: Get last one ( recent )
</span><span class="n">printOne</span><span class="p">(</span><span class="s">"last"</span><span class="p">,</span> <span class="n">service</span><span class="p">.</span><span class="n">last</span><span class="p">())</span>

<span class="c1">// CASE 9: Delete by id
</span><span class="n">service</span><span class="p">.</span><span class="n">delete</span><span class="p">(</span><span class="m">4</span><span class="p">)</span>

<span class="c1">// CASE 10: Get total ( 4 )
</span><span class="n">println</span><span class="p">(</span><span class="n">service</span><span class="p">.</span><span class="n">count</span><span class="p">())</span>

<span class="c1">// CASE 11: Type-Safe queryusing property type reference
</span><span class="n">println</span><span class="p">(</span><span class="n">service</span><span class="p">.</span><span class="n">findBy</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="n">playing</span><span class="p">,</span> <span class="k">true</span><span class="p">))</span>

<span class="c1">// CASE 12: Query
</span><span class="n">println</span><span class="p">(</span><span class="n">service</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">Query</span><span class="p">().</span><span class="k">where</span><span class="p">(</span><span class="s">"playing"</span><span class="p">,</span> <span class="s">"="</span><span class="p">,</span> <span class="k">true</span><span class="p">)))</span>

</code></pre>
</div>
						<br/>
						<h3>Features</h3>
						<p>The purpose of the service class is to provide the following features:</p>
						<table class="table table-bordered table-striped">
							<tr>
								<td><strong>Area</strong></td>
								<td><strong>Notes</strong></td>
								<td><strong>Currently available</strong></td>
							</tr>
							<tr>
								<td><strong>Logic</strong></td>
								<td>1. serves as the location to put any business logic/operations. All controller/apis delegate logic to a service</td>
								<td>yes</td>
							</tr>
							<tr>
								<td><strong>Crud</strong></td>
								<td>2. standardized CRUD ( create, retrieve, update, delete) methods that simply delegate to the Repo</td>
								<td>yes</td>
							</tr>
							<tr>
								<td><strong>Search</strong></td>
								<td>3. standardized Find ( first, last, recent, oldest, findBy ) methods finding / searching for items</td>
								<td>yes</td>
							</tr>
							<tr>
								<td><strong>Hooks</strong></td>
								<td>4. standardized Hooks to perform some operations before/after CRUD operations</td>
								<td><strong>coming soon</strong></td>
							</tr>
						</table>
						<br/>
						<div class="alert alert-info" role="alert">
							<p><i class="fa fa-info-circle"></i></p>
							<ol>
							  <li>If you want to add custom logic or avoid generics, extend from the EntityService[T] class</li>
							  <li>You can simply use the base service for your Entity via <strong>new EntityService[User]()</strong></li>
							  <li>You can subclass the EntityService to avoid generics <strong>class UserService extends EntityService[User]</strong></li>
							  <li>The service layer uses a <strong>EntityRepo</strong>( see below ) to perform CRUD operations</li>
							  <li>The service layer is <strong>independent</strong> of the underlying database/repository.</li>
							  <li>Use the <strong>Entities</strong> component for registering all your entities.</li>
							</ol>
						</div>
						<h3>More</h3>
						<p>For more information, see the full example that is part of the examples project</p>
						<a href="kotlin-mod-orm-service.html" class="more"><span class="btn btn-template">See full code</span></a>
						<a href="#orm-overview" class="more"><span class="btn btn-template">Back to top</span></a>
					</div>
					<br/><br/><br/>
					<div> 
						<h2 id="orm-repository">5. Repo</h2>
						<p>Similar to the <strong>Service</strong> class above,
						each entity has a corresponding repository that provides the actual CRUD and search operations 
						for your entity against the data store. You do <strong>NOT</strong> have to create a Repository by default, 
						you can simply use the built-in <strong>EntityRepo[T]</strong> class(s).
						The EntityRepo[T] class is essentially an implementation of a <strong>Generic Entity Repository</strong> pattern. 
						You can ofcourse create a custom repo class for your entity by extending from EntityRepo[T] or EntityRepoMySql[T].
						</p>
						<br/>
						<h3>Declare</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">slatekit.common.db.Db</span>
<span class="k">import</span> <span class="nn">slatekit.common.db.DbConString</span>
<span class="k">import</span> <span class="nn">slatekit.common.mapper.Mapper</span>
<span class="k">import</span> <span class="nn">slatekit.entities.core.Entities</span>
<span class="k">import</span> <span class="nn">slatekit.entities.core.EntityMapper</span>
<span class="k">import</span> <span class="nn">slatekit.entities.repos.EntityRepoInMemory</span>
<span class="k">import</span> <span class="nn">slatekit.entities.repos.EntityRepoMySql</span>

<span class="c1">// CASE 1: In-memory ( non-persisted ) repository has limited functionality
// but is very useful for rapid prototyping of a data model when you are trying to
// figure out what fields/properties should exist on the model
</span><span class="kd">val</span> <span class="py">repo</span> <span class="p">=</span> <span class="n">EntityRepoInMemory</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>


<span class="c1">// CASE 2: My-sql ( persisted ) repository can be easily setup
// More examples of database setup/entity registration available in Setup/Registration docs.
// 2.1: First setup the database
</span><span class="kd">val</span> <span class="py">db</span> <span class="p">=</span> <span class="n">Db</span><span class="p">(</span><span class="n">DbConString</span><span class="p">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="p">,</span> <span class="s">"jdbc:mysql://localhost/user_db"</span><span class="p">,</span> <span class="s">"root"</span><span class="p">,</span> <span class="s">"abcdefghi"</span><span class="p">))</span>

<span class="c1">// 2.2: Setup the mapper
// NOTE: This assumes the entity has annotations on the properties.
// If you do not want to use annotations, looks at the mapper/model
// examples for alternative approaches.
</span><span class="kd">val</span> <span class="py">model</span> <span class="p">=</span> <span class="n">Mapper</span><span class="p">.</span><span class="n">loadSchema</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>
<span class="kd">val</span> <span class="py">mapper</span> <span class="p">=</span> <span class="n">EntityMapper</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

<span class="c1">// 2.3: Now create the repo with database and mapper
</span><span class="kd">val</span> <span class="py">repoMySql</span> <span class="p">=</span> <span class="n">EntityRepoMySql</span><span class="p">&lt;</span><span class="n">Movie</span><span class="p">&gt;(</span><span class="n">db</span><span class="p">,</span> <span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="n">mapper</span><span class="p">)</span>

</code></pre>
</div>
						<br/>						
						<h3>Usage</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="c1">// CASE 1: Create 3-4 users for showing use-cases
</span><span class="n">repo</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">Movie</span><span class="p">(</span><span class="m">0L</span><span class="p">,</span> <span class="s">"Batman Begins"</span>     <span class="p">,</span> <span class="s">"action"</span><span class="p">,</span> <span class="k">false</span><span class="p">,</span> <span class="m">50</span><span class="p">,</span> <span class="m">4.2</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="m">2005</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">)))</span>
<span class="n">repo</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">Movie</span><span class="p">(</span><span class="m">0L</span><span class="p">,</span> <span class="s">"Dark Knight"</span>      <span class="p">,</span> <span class="s">"action"</span><span class="p">,</span> <span class="k">false</span><span class="p">,</span> <span class="m">100</span><span class="p">,</span><span class="m">4.5</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="m">2012</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">)))</span>
<span class="n">repo</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">Movie</span><span class="p">(</span><span class="m">0L</span><span class="p">,</span> <span class="s">"Dark Knight Rises"</span><span class="p">,</span> <span class="s">"action"</span><span class="p">,</span> <span class="k">false</span><span class="p">,</span> <span class="m">120</span><span class="p">,</span><span class="m">4.2</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="m">2012</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">)))</span>

<span class="c1">// CASE 2: Get by id
</span><span class="n">printOne</span><span class="p">(</span><span class="s">"2"</span><span class="p">,</span> <span class="n">repo</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="m">2</span><span class="p">))</span>

<span class="c1">// CASE 3: Update
</span><span class="kd">val</span> <span class="py">item2</span> <span class="p">=</span> <span class="n">repo</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>
<span class="n">item2</span><span class="o">?.</span><span class="n">let</span> <span class="p">{</span> <span class="n">item</span> <span class="p">-&gt;</span>
	<span class="kd">val</span> <span class="py">updated</span> <span class="p">=</span> <span class="n">item</span><span class="p">.</span><span class="n">copy</span><span class="p">(</span><span class="n">title</span> <span class="p">=</span> <span class="s">"Batman: Dark Knight"</span><span class="p">)</span>
	<span class="n">repo</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">updated</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// CASE 4: Get all
</span><span class="n">printAll</span><span class="p">(</span><span class="s">"all"</span><span class="p">,</span> <span class="n">repo</span><span class="p">.</span><span class="n">getAll</span><span class="p">())</span>

<span class="c1">// CASE 5: Get recent/last 2
</span><span class="n">printAll</span><span class="p">(</span><span class="s">"recent"</span><span class="p">,</span> <span class="n">repo</span><span class="p">.</span><span class="n">recent</span><span class="p">(</span><span class="m">2</span><span class="p">))</span>

<span class="c1">// CASE 6: Get oldest 2
</span><span class="n">printAll</span><span class="p">(</span><span class="s">"oldest"</span><span class="p">,</span> <span class="n">repo</span><span class="p">.</span><span class="n">oldest</span><span class="p">(</span><span class="m">2</span><span class="p">))</span>

<span class="c1">// CASE 7: Get first one ( oldest )
</span><span class="n">printOne</span><span class="p">(</span><span class="s">"first"</span><span class="p">,</span> <span class="n">repo</span><span class="p">.</span><span class="n">first</span><span class="p">())</span>

<span class="c1">// CASE 8: Get last one ( recent )
</span><span class="n">printOne</span><span class="p">(</span><span class="s">"last"</span><span class="p">,</span> <span class="n">repo</span><span class="p">.</span><span class="n">last</span><span class="p">())</span>

<span class="c1">// CASE 9: Delete by id
</span><span class="n">repo</span><span class="p">.</span><span class="n">delete</span><span class="p">(</span><span class="m">4</span><span class="p">)</span>

<span class="c1">// CASE 10: Get total ( 4 )
</span><span class="n">println</span><span class="p">(</span><span class="n">repo</span><span class="p">.</span><span class="n">count</span><span class="p">())</span>

<span class="c1">// CASE 11: Query
</span><span class="n">println</span><span class="p">(</span><span class="n">repo</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">Query</span><span class="p">().</span><span class="k">where</span><span class="p">(</span><span class="s">"playing"</span><span class="p">,</span> <span class="s">"="</span><span class="p">,</span> <span class="k">true</span><span class="p">)))</span>

</code></pre>
</div>
						<br/>
						<h3>Features</h3>
						<p>The purpose of the repo class is to provide the following features:</p>						
						<table class="table table-bordered table-striped">
							<tr>
								<td><strong>Area</strong></td>
								<td><strong>Notes</strong></td>
								<td><strong>Currently available</strong></td>
							</tr>
							<tr>
								<td><strong>Crud</strong></td>
								<td>1. standardized CRUD ( create, retrieve, update, delete) methods that simply delegate to the Repo</td>
								<td>yes</td>
							</tr>
							<tr>
								<td><strong>Search</strong></td>
								<td>2. standardized Find ( first, last, recent, oldest, findBy ) methods finding / searching for items</td>
								<td>yes</td>
							</tr>
						</table>
						<br/>
						<div class="alert alert-info" role="alert">
							<p><i class="fa fa-info-circle"></i></p>
							<ol>
							  <li>If you want to add custom logic or avoid generics, extend from the EntityRepo[T] class</li>
							  <li>There is repo implementation for MySql <strong>EntityRepoMySql[User]</strong></li>
							  <li>You can subclass the EntityRepo if you need to provide your own implementation of method(s)</li>
							  <li>The repository uses a <strong>EntityMapper</strong>( see below ) to map between objects to SQL</li>							  
							</ol>
						</div>
						<br/>
						<h3>More</h3>
						<p>For more information, see the full example that is part of the examples project</p>
						<a href="kotlin-mod-orm-repo.html" class="more"><span class="btn btn-template">See full code</span></a>
						<a href="#orm-overview" class="more"><span class="btn btn-template">Back to top</span></a>
					</div>
					<br/><br/><br/>
					<div> 
						<h2 id="orm-mapper">6. Mapper</h2>
						<p>The mapper component is used map fields in the entity to/from SQL. 
						It is decoupled from the Repository and is designed to be general enough to support conversion to/from other formats such as JSON.
						You do <strong>NOT</strong> need to write a mapper, a default mysql entity mapper is provided.
						</p>
						<br/>
						<h3>Schema</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">slatekit.common.Model</span>
<span class="k">import</span> <span class="nn">slatekit.common.mapper.Mapper</span>

<span class="c1">// CASE 1: Load the schema from the annotations on the model
</span><span class="kd">val</span> <span class="py">schema1</span> <span class="p">=</span> <span class="n">Mapper</span><span class="p">.</span><span class="n">loadSchema</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>


<span class="c1">// CASE 2: Load the schema manually using properties for type-safety
</span><span class="kd">val</span> <span class="py">schema2</span> <span class="p">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>
		<span class="p">.</span><span class="n">addId</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="n">id</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>
		<span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="n">title</span>     <span class="p">,</span> <span class="s">"Title of movie"</span>         <span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">30</span><span class="p">)</span>
		<span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="n">category</span>  <span class="p">,</span> <span class="s">"Category (action|drama)"</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">20</span><span class="p">)</span>
		<span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="n">playing</span>   <span class="p">,</span> <span class="s">"Whether its playing now"</span><span class="p">)</span>
		<span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="n">rating</span>    <span class="p">,</span> <span class="s">"Rating from users"</span>      <span class="p">)</span>
		<span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="n">released</span>  <span class="p">,</span> <span class="s">"Date of release"</span>        <span class="p">)</span>
		<span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="n">createdAt</span> <span class="p">,</span> <span class="s">"Who created record"</span>     <span class="p">)</span>
		<span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="n">createdBy</span> <span class="p">,</span> <span class="s">"When record was created"</span><span class="p">)</span>
		<span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="n">updatedAt</span> <span class="p">,</span> <span class="s">"Who updated record"</span>     <span class="p">)</span>
		<span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="n">updatedBy</span> <span class="p">,</span> <span class="s">"When record was updated"</span><span class="p">)</span>


<span class="c1">// CASE 3: Load the schema manually using named fields
</span><span class="kd">val</span> <span class="py">schema3</span> <span class="p">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">Example_Mapper</span><span class="p">.</span><span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>
		<span class="p">.</span><span class="n">addId</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="n">id</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>
		<span class="p">.</span><span class="n">addText</span>    <span class="p">(</span><span class="s">"title"</span>     <span class="p">,</span> <span class="s">"Title of movie"</span>         <span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">30</span><span class="p">)</span>
		<span class="p">.</span><span class="n">addText</span>    <span class="p">(</span><span class="s">"category"</span>  <span class="p">,</span> <span class="s">"Category (action|drama)"</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">20</span><span class="p">)</span>
		<span class="p">.</span><span class="n">addBool</span>    <span class="p">(</span><span class="s">"playing"</span>   <span class="p">,</span> <span class="s">"Whether its playing now"</span><span class="p">)</span>
		<span class="p">.</span><span class="n">addDouble</span>  <span class="p">(</span><span class="s">"rating"</span>    <span class="p">,</span> <span class="s">"Rating from users"</span>      <span class="p">)</span>
		<span class="p">.</span><span class="n">addDateTime</span><span class="p">(</span><span class="s">"released"</span>  <span class="p">,</span> <span class="s">"Date of release"</span>        <span class="p">)</span>
		<span class="p">.</span><span class="n">addDateTime</span><span class="p">(</span><span class="s">"createdAt"</span> <span class="p">,</span> <span class="s">"Who created record"</span>     <span class="p">)</span>
		<span class="p">.</span><span class="n">addLong</span>    <span class="p">(</span><span class="s">"createdBy"</span> <span class="p">,</span> <span class="s">"When record was created"</span><span class="p">)</span>
		<span class="p">.</span><span class="n">addDateTime</span><span class="p">(</span><span class="s">"updatedAt"</span> <span class="p">,</span> <span class="s">"Who updated record"</span>     <span class="p">)</span>
		
</code></pre>
</div>			
						<br/>
						<h3>Usage</h3>
						<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">slatekit.entities.core.EntityMapper</span>

<span class="kd">val</span> <span class="py">schema</span> <span class="p">=</span> <span class="n">Mapper</span><span class="p">.</span><span class="n">loadSchema</span><span class="p">(</span><span class="n">Movie</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>

<span class="c1">// CASE 1: Create mapper with the schema
</span><span class="kd">val</span> <span class="py">mapper</span> <span class="p">=</span> <span class="n">EntityMapper</span> <span class="p">(</span><span class="n">schema</span><span class="p">)</span>

<span class="c1">// Create sample instance to demo the mapper
</span><span class="kd">val</span> <span class="py">movie</span> <span class="p">=</span> <span class="n">Example_Mapper</span><span class="p">.</span><span class="n">Movie</span><span class="p">(</span>
		<span class="n">title</span> <span class="p">=</span> <span class="s">"Man Of Steel"</span><span class="p">,</span>
		<span class="n">category</span> <span class="p">=</span> <span class="s">"action"</span><span class="p">,</span>
		<span class="n">playing</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span>
		<span class="n">cost</span> <span class="p">=</span> <span class="m">100</span><span class="p">,</span>
		<span class="n">rating</span> <span class="p">=</span> <span class="m">4.0</span><span class="p">,</span>
		<span class="n">released</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="m">2015</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1">// CASE 2: Get the sql for create
</span><span class="kd">val</span> <span class="py">sqlCreate</span> <span class="p">=</span> <span class="n">mapper</span><span class="p">.</span><span class="n">mapToSql</span><span class="p">(</span><span class="n">movie</span><span class="p">,</span> <span class="n">update</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span> <span class="n">fullSql</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span>
<span class="n">println</span><span class="p">(</span><span class="n">sqlCreate</span><span class="p">)</span>

<span class="c1">// CASE 3: Get the sql for update
</span><span class="kd">val</span> <span class="py">sqlForUpdate</span> <span class="p">=</span> <span class="n">mapper</span><span class="p">.</span><span class="n">mapToSql</span><span class="p">(</span><span class="n">movie</span><span class="p">,</span> <span class="n">update</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">fullSql</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span>
<span class="n">println</span><span class="p">(</span><span class="n">sqlForUpdate</span><span class="p">)</span>

<span class="c1">// CASE 4: Generate the table schema for mysql from the model
</span><span class="n">println</span><span class="p">(</span><span class="s">"table sql : "</span> <span class="p">+</span> <span class="n">DbSourceMySql</span><span class="p">().</span><span class="n">builAddTable</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>

</code></pre>
</div>					<br/>
						<h3>Features</h3>
						<table class="table table-bordered table-striped">
							<tr>
								<td><strong>Area</strong></td>
								<td><strong>Notes</strong></td>
								<td><strong>Currently available</strong></td>
							</tr>
							<tr>
								<td><strong>ORM</strong></td>
								<td>1. Converts the entity to SQL and SQL records to an Entity</td>
								<td>yes</td>
							</tr>
							<tr>
								<td><strong>Serialization</strong></td>
								<td>2. Provides support for serializing the entity to other formats ( json )</td>
								<td>yes</td>
							</tr>
							<tr>
								<td><strong>Schema</strong></td>
								<td>3. Stores an internal <strong>Model definition</strong> (see below) that defines the fields for a entity</td>
								<td>yes</td>
							</tr>
						</table>
						<br/>
						<h3>Notes</h3>
						<div class="alert alert-info" role="alert">
							<p><i class="fa fa-info-circle"></i></p>
							<ol>
							  <li>The base mapper is <strong>EntityMapper</strong> which is available in the slate.entities.jar</li>
							  <li>The <strong>EntityMapper(typeOf[User])</strong> is used when registering your entity, unless you explicity supply one</li>
							  <li>The mapper creates an internal Model Definition(see below) to store the schema of your entity. </li>
							</ol>
						</div>
						<h3>More</h3>
						<p>For more information, see the full example that is part of the examples project</p>
						<a href="kotlin-mod-orm-mapper.html" class="more"><span class="btn btn-template">See full code</span></a>
						<a href="#orm-overview" class="more"><span class="btn btn-template">Back to top</span></a>
					</div>
					<br/><br/><br/>
					<div> 
						<h2 id="orm-model">7. Models</h2>
						<p>The ORM that map entities to tables automatically creates an underlying model definition for each mapped Entity. 
						A model definition is the name of the model along with the fields to be persisted. This can be done 2 different ways. Either manually ( programmatically ) or automatically ( via annotations on your entity classes ). <br/>
						</p>
						<br/>
						<div class="alert alert-info" role="alert">
							<p><i class="fa fa-info-circle"></i></p>
							<ol>
							  <li>You do <strong>NOT</strong> need to write your own model definition.</li>							  
							  <li>This code is shown here to mostly to explain concepts and some basic internals.</li>
							  <li>The model definition is also internally for the code generator ( document not yet available )</li>							  
							</ol>
						</div>
						<h3>More</h3>
						<p>For more information, see the full example that is part of the examples project</p>
						<a href="kotlin-mod-orm-model.html" class="more"><span class="btn btn-template">See full code</span></a>
						<a href="#orm-overview" class="more"><span class="btn btn-template">Back to top</span></a>
					</div>	
					<br/><br/>				
					<div>
						<h2 id="orm-relations">8. Relations</h2>
						<p>
						While joins/relationships are not supported currently, you can easily get a reference to other entity Services to query related data. Part of the reason for not initially supporting joins/relationships was to get a simple ORM working well for single-table models for mostly Cloud/Mobile Backend data. The ORM will be enhanced in future versions.
						</p>						
						<a href="#orm-overview" class="more"><span class="btn btn-template">Back to top</span></a>
					</div>
				</div>
            </div>
          </div>

              </div>
          </section>
          <!--=============== /. About Section ===============-->


          

          

    
           <!--=============== Footer ===============-->
           <footer id="main-footer" class="main-footer">
               <div class="container text-center">

                   <!-- Brand -->
                   <div class="logo">
                       <strong class="brand-text">Slate Kit</strong>
                   </div>
                   <!-- Description -->
                   <p class="description">Connect with us on our various channels and reach out for more info.</p>

                   <!-- Social Icons Menu -->
                   <ul class="social list-inline">
                       <li class="list-inline-item">
                           <a href="#" title="Facebook" target="_blank"><i class="fa fa-facebook"></i></a>
                       </li>
                       <li class="list-inline-item">
                           <a href="#" title="Twitter" target="_blank"><i class="fa fa-twitter"></i></a>
                       </li>
                       <li class="list-inline-item">
                           <a href="#" title="Google Plus" target="_blank"><i class="fa fa-google-plus"></i></a>
                       </li>
                       <li class="list-inline-item">
                           <a href="#" title="Instagram" target="_blank"><i class="fa fa-instagram"></i></a>
                       </li>
                   </ul>
               </div>

              <!-- Copyrights -->
               <div class="copyrights">
                   <div class="container">
                       <div class="row">
                           <div class="col-md-6">
                               <p>&copy; 2017 <span class="text-primary">Perfo.com</span> All Rights Reserved.</p>
                           </div>
                           <div class="col-md-6 text-right">
                               <ul class="list-inline">
                                   <li class="list-inline-item"><a href="#">FAQ</a></li>
                                   <li class="list-inline-item"><a href="#">Terms Of Services</a></li>
                                   <li class="list-inline-item"><a href="#">Policy &amp; Privacy</a></li>
                               </ul>
                           </div>
                       </div>
                   </div>
               </div> <!-- End Copyrights -->
           </footer>
           <!--=============== /. Footer ===============-->


           <!--=============== Preloader ===============-->
           <div class="preloader d-flex align-items-center justify-content-center flex-column">
                <div class="la-square-jelly-box la-2x">
                    <div></div>
                    <div></div>
                </div>
                <div class="text">Slate Kit</div>
           </div>
           <!--=============== /. Preloader ===============-->


           <!--=============== Scroll To Top ===============-->
           <div id="scrollTop">
               <div class="d-flex align-items-center justify-content-end">
                   <i class="fa fa-long-arrow-up"></i>
                   <span>To Top</span>
               </div>
           </div>
           <!--=============== /. Scroll To Top ===============-->
      </div>



        <!-- jQuery CDN -->
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <!-- Tether CDN [Reuired for Bootstrap 4 tooltip] -->
        <script src="https://npmcdn.com/tether@1.2.4/dist/js/tether.min.js"></script>
        <!-- Bootstrap 4 Alpha -->
        <script src="themes/perfo/assets/js/bootstrap.min.js"></script>
        <!-- Owl Carousel -->
        <script src="themes/perfo/assets/js/owl.carousel.min.js"></script>
        <!-- Easy Scroll -->
        <script src="themes/perfo/assets/js/easyscroll.min.js"></script>
        <!-- WOW JS -->
        <script src="themes/perfo/assets/js/wow.min.js"></script>
        <!-- Custom Js -->
        <script src="themes/perfo/assets/js/script.js"></script>

        <script type="text/javascript">
          var _codehelixAppPage = "about";
        </script>
          <script type="text/javascript" src="themes/perfo/app/app.js"></script>
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-84704317-1', 'auto');
          ga('send', 'pageview');
        </script>
    </body>
</html>
